var Se=Object.defineProperty;var Ce=(a,s,t)=>s in a?Se(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var k=(a,s,t)=>Ce(a,typeof s!="symbol"?s+"":s,t);import{r as ke,b as u,j as e,S as T,q as F,J as Ae,f as I}from"./app-Bf9bZ36i.js";import{c as Ee,P as B,u as _e,a as U,b as z,T as Le,d as Te,e as b,f as y}from"./tabs-CUURTTC5.js";import{c as S,B as f,C as A,a as E}from"./createLucideIcon-Cs7jGhac.js";import{u as Q,M as Re,y as Me}from"./MessageComposer-CjzTKVdg.js";import{u as Y,U as Pe,R as Ie}from"./RecipientSelector-BmsMO9wb.js";import{C as $e,A as De}from"./AnalyticsDashboard-CznVrBS6.js";import"./index.es-TngwJpoC.js";import{c as Fe}from"./react-C2CkPNkP.js";import{I as _}from"./InputLabel-BpxeUOqV.js";import{I as L}from"./input-ChFIGbzF.js";import{C as Ue,P as W}from"./Configuration-Cf402ocq.js";import{P as V}from"./PrimaryButton-jbaJCwhg.js";import"./index-0ob1QMS3.js";import"./InputError-CiGK3cGL.js";import"./DangerButton-CDzLNd9u.js";import"./transition-BztWKB2Q.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ze=S("bell",Be);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],He=S("chart-no-axes-column",qe);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ve=S("message-square",We);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],K=S("settings",Ke);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"m14.305 19.53.923-.382",key:"3m78fa"}],["path",{d:"m15.228 16.852-.923-.383",key:"npixar"}],["path",{d:"m16.852 15.228-.383-.923",key:"5xggr7"}],["path",{d:"m16.852 20.772-.383.924",key:"dpfhf9"}],["path",{d:"m19.148 15.228.383-.923",key:"1reyyz"}],["path",{d:"m19.53 21.696-.382-.924",key:"1goivc"}],["path",{d:"M2 21a8 8 0 0 1 10.434-7.62",key:"1yezr2"}],["path",{d:"m20.772 16.852.924-.383",key:"htqkph"}],["path",{d:"m20.772 19.148.924.383",key:"9w9pjp"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}]],Ge=S("user-round-cog",Oe);var $={exports:{}},D={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O;function Je(){if(O)return D;O=1;var a=ke();function s(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var t=typeof Object.is=="function"?Object.is:s,r=a.useState,i=a.useEffect,n=a.useLayoutEffect,p=a.useDebugValue;function h(d,m){var x=m(),N=r({inst:{value:x,getSnapshot:m}}),j=N[0].inst,w=N[1];return n(function(){j.value=x,j.getSnapshot=m,o(j)&&w({inst:j})},[d,x,m]),i(function(){return o(j)&&w({inst:j}),d(function(){o(j)&&w({inst:j})})},[d]),p(x),x}function o(d){var m=d.getSnapshot;d=d.value;try{var x=m();return!t(d,x)}catch{return!0}}function c(d,m){return m()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:h;return D.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:v,D}var G;function Qe(){return G||(G=1,$.exports=Je()),$.exports}var Ye=Qe();function Xe(){return Ye.useSyncExternalStore(Ze,()=>!0,()=>!1)}function Ze(){return()=>{}}var q="Avatar",[es,Ss]=Ee(q),[ss,X]=es(q),Z=u.forwardRef((a,s)=>{const{__scopeAvatar:t,...r}=a,[i,n]=u.useState("idle");return e.jsx(ss,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:n,children:e.jsx(B.span,{...r,ref:s})})});Z.displayName=q;var ee="AvatarImage",se=u.forwardRef((a,s)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...n}=a,p=X(ee,t),h=as(r,n),o=_e(c=>{i(c),p.onImageLoadingStatusChange(c)});return U(()=>{h!=="idle"&&o(h)},[h,o]),h==="loaded"?e.jsx(B.img,{...n,ref:s,src:r}):null});se.displayName=ee;var ae="AvatarFallback",te=u.forwardRef((a,s)=>{const{__scopeAvatar:t,delayMs:r,...i}=a,n=X(ae,t),[p,h]=u.useState(r===void 0);return u.useEffect(()=>{if(r!==void 0){const o=window.setTimeout(()=>h(!0),r);return()=>window.clearTimeout(o)}},[r]),p&&n.imageLoadingStatus!=="loaded"?e.jsx(B.span,{...i,ref:s}):null});te.displayName=ae;function J(a,s){return a?s?(a.src!==s&&(a.src=s),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function as(a,{referrerPolicy:s,crossOrigin:t}){const r=Xe(),i=u.useRef(null),n=r?(i.current||(i.current=new window.Image),i.current):null,[p,h]=u.useState(()=>J(n,a));return U(()=>{h(J(n,a))},[n,a]),U(()=>{const o=d=>()=>{h(d)};if(!n)return;const c=o("loaded"),v=o("error");return n.addEventListener("load",c),n.addEventListener("error",v),s&&(n.referrerPolicy=s),typeof t=="string"&&(n.crossOrigin=t),()=>{n.removeEventListener("load",c),n.removeEventListener("error",v)}},[n,t,s]),p}var re=Z,ne=se,le=te;const ie=u.forwardRef(({className:a,...s},t)=>e.jsx(re,{ref:t,className:z("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s}));ie.displayName=re.displayName;const ce=u.forwardRef(({className:a,...s},t)=>e.jsx(ne,{ref:t,className:z("aspect-square h-full w-full",a),...s}));ce.displayName=ne.displayName;const oe=u.forwardRef(({className:a,...s},t)=>e.jsx(le,{ref:t,className:z("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s}));oe.displayName=le.displayName;const de=Fe(a=>({activeTab:"",setActiveTab:s=>a({activeTab:s})})),ts=({tabActive:a="compose",templates:s,children:t})=>{const{recipients:r}=Y(),{activeTab:i,setActiveTab:n}=de(),{message:p,template_:h}=Q(),{setData:o}=T({recipients:r,message:""});u.useEffect(()=>{o("message",p),o("recipients",r)},[r,p]);const{flash:c}=F().props;return u.useEffect(()=>{c&&window.alert_toast(c.title,c.message,c.icon)},[c]),e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsxs("div",{className:"container flex h-16 items-center justify-between px-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"font-bold text-xl flex items-center",children:[e.jsx("span",{className:"text-primary",children:"Auto"}),e.jsx("span",{children:"Blitz"})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{variant:"ghost",size:"icon",children:e.jsx(ze,{className:"h-5 w-5"})}),e.jsx(f,{variant:"ghost",size:"icon",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsxs(ie,{children:[e.jsx(ce,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin",alt:"User"}),e.jsx(oe,{children:"AB"})]}),e.jsx(Ae,{method:"POST",href:route("logout"),children:"Logout"})]})]})}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx("aside",{className:"hidden md:flex w-64 flex-col border-r bg-card p-4",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"py-2",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Menu"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(f,{variant:i==="compose"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>{n("compose")},children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Compose Message"]}),e.jsxs(f,{variant:i==="recipients"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>{n("recipients")},children:[e.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Select Recipients"]}),e.jsxs(f,{variant:i==="schedule"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>n("schedule"),children:[e.jsx($e,{className:"mr-2 h-4 w-4"}),"Schedule"]}),e.jsxs(f,{variant:i==="analytics"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>n("analytics"),children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Analytics"]}),e.jsxs(f,{variant:i==="configuration"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>n("configuration"),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Configuration"]})]}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Settings"}),e.jsxs(f,{variant:i==="accsettings"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>{n("accsettings")},children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Account Settings"]})]})})}),e.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e.jsx("div",{className:"container mx-auto",children:t})})]})]})};var rs="https://sms.capcom.me/api/3rdparty/v1";class ns{constructor(s,t,r,i=rs){k(this,"baseUrl");k(this,"httpClient");k(this,"defaultHeaders");this.baseUrl=i,this.httpClient=r,this.defaultHeaders={"User-Agent":"android-sms-gateway/1.0 (client; js)",Authorization:`Basic ${btoa(`${s}:${t}`)}`}}async send(s){const t=`${this.baseUrl}/message`,r={"Content-Type":"application/json",...this.defaultHeaders};return this.httpClient.post(t,s,r)}async getState(s){const t=`${this.baseUrl}/message/${s}`,r={...this.defaultHeaders};return this.httpClient.get(t,r)}async getWebhooks(){const s=`${this.baseUrl}/webhooks`,t={...this.defaultHeaders};return this.httpClient.get(s,t)}async registerWebhook(s){const t=`${this.baseUrl}/webhooks`,r={"Content-Type":"application/json",...this.defaultHeaders};return this.httpClient.post(t,s,r)}async deleteWebhook(s){const t=`${this.baseUrl}/webhooks/${s}`,r={...this.defaultHeaders};return this.httpClient.delete(t,r)}}var ls=ns;const Cs=({tabActive:a="compose",templates:s,allrecipients:t,allsegments:r=[],config:i,cloudconfig:n,messages:p})=>{const{activeTab:h,setActiveTab:o}=de(),{recipients:c}=Y(),{message:v,template_:d}=Q(),{setData:m}=T({recipients:c,message:""});u.useEffect(()=>{m("message",v),m("recipients",c),c&&console.log("recipients:",c)},[c,v]);const{flash:x}=F().props;u.useEffect(()=>{x&&window.alert_toast(x.title,x.message,x.icon)},[x]);const[N,j]=u.useState(!1),w=async()=>{try{j(!0);const l=await axios.post("/services/send-sms",{message:v,phoneNumbers:c.map(g=>g.phone)});if(l.data.flash){const{icon:g,message:C,title:H}=l.data.flash;alert_toast(H,C,g)}console.log(l)}catch(l){console.error("Error:",l),Me.error("Failed to send message")}finally{j(!1),I.reload({only:["messages"]})}},me={get:async(l,g)=>(await fetch(l,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("mjgwapo:ocWFMPKc")}})).json(),post:async(l,g,C)=>(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("mjgwapo:ocWFMPKc")},body:JSON.stringify(g)})).json(),delete:async(l,g)=>(await fetch(l,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("mjgwapo:ocWFMPKc")}})).json()};new ls("mjgwapo","ocWFMPKc",me);const{user:R}=F().props.auth,{data:M,setData:P,errors:ue,processing:he,put:pe,clearErrors:xe,reset:fe}=T({current_password:"",password:"",confirmpw:""}),je=l=>{l.preventDefault(),pe(route("admin.settings.password.update"),{onSuccess:()=>{xe(),fe()},onFinish:()=>{I.reload({only:["flash","auth"]})}})},{data:ve,setData:ge,errors:ye,processing:Ne,put:we}=T({email:R==null?void 0:R.email}),be=l=>{l.preventDefault(),we(route("admin.settings.email.update"),{onFinish:()=>{I.reload({only:["flash","auth"]})}})};return e.jsxs(ts,{children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Text Blaster"}),e.jsx(A,{className:"mb-6",children:e.jsx(E,{className:"p-6",children:e.jsxs(Le,{value:h,onValueChange:o,className:"w-full",children:[e.jsxs(Te,{className:"grid grid-cols-5 mb-6",children:[e.jsx(b,{value:"compose",children:"Compose"}),e.jsx(b,{value:"recipients",children:"Recipients"}),e.jsx(b,{value:"schedule",children:"Schedule"}),e.jsx(b,{value:"analytics",children:"Analytics"}),e.jsx(b,{value:"configuration",children:"Configuration"})]}),e.jsx(y,{value:"compose",className:"space-y-4",children:e.jsx(Re,{onNext:()=>o("recipients"),messagetemps:s})}),e.jsx(y,{value:"recipients",className:"space-y-4",children:e.jsx(Ie,{onBack:()=>o("compose"),onNext:()=>o("schedule"),allrecipients:t,allsegments:r})}),e.jsx(y,{value:"schedule",className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Schedule Your Message"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"send-now",name:"schedule",defaultChecked:!0}),e.jsx("label",{htmlFor:"send-now",children:"Send Immediately"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"schedule-later",name:"schedule",disabled:!0}),e.jsxs("label",{htmlFor:"schedule-later",children:["Schedule for Later",e.jsx("small",{className:" text-black-50",children:" (On Development...)"})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date and Time"}),e.jsx("input",{type:"datetime-local",className:"w-full p-2 border rounded-md",disabled:!0})]})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-md",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Message Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Template:"})," ",d]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recipients:"})," ",c.length," contacts"]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(f,{variant:"outline",onClick:()=>o("recipients"),children:"Back"}),e.jsx(f,{onClick:()=>{w()},disabled:N,children:"Send Message"})]})]})}),e.jsx(y,{value:"analytics",className:"space-y-4",children:e.jsx(De,{messages:p})}),e.jsx(y,{value:"configuration",className:"space-y-4",children:e.jsx(Ue,{config:i,cloudconfig:n})}),e.jsxs(y,{value:"accsettings",className:"space-y-4 w-1/2",children:[e.jsx(W,{errors:ye}),e.jsx("h3",{children:"Change your email here"}),e.jsxs("div",{children:[e.jsx(_,{value:"Email"}),e.jsx(L,{value:ve.email,className:" w-full",onChange:l=>ge("email",l.target.value)})]}),e.jsx(V,{disabled:Ne,onClick:be,children:"Save New Email"}),e.jsxs("div",{children:[e.jsx(W,{errors:ue}),e.jsxs("div",{className:" grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{value:"Current Password"}),e.jsx(L,{value:M.current_password,className:" w-full",type:"password",onChange:l=>P("current_password",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{value:"New Password"}),e.jsx(L,{value:M.password,className:" w-full",type:"password",onChange:l=>P("password",l.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(_,{value:"Confirm Password"}),e.jsx(L,{value:M.confirmpw,className:" w-full",type:"password",onChange:l=>P("confirmpw",l.target.value)})]})]}),e.jsx(V,{disabled:he,onClick:je,children:"Save new password"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(A,{children:e.jsxs(E,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Recent Campaigns"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Summer Sale Promo"}),e.jsx("span",{className:"text-green-500 text-sm",children:"Sent"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Service Reminder"}),e.jsx("span",{className:"text-amber-500 text-sm",children:"Scheduled"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"New Inventory Alert"}),e.jsx("span",{className:"text-gray-500 text-sm",children:"Draft"})]})]})]})}),e.jsx(A,{children:e.jsxs(E,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Message Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Messages Sent (MTD)"}),e.jsx("span",{className:"font-medium",children:p.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Active Campaigns"}),e.jsx("span",{className:"font-medium",children:"0"})]})]})]})}),e.jsx(A,{children:e.jsxs(E,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(f,{variant:"outline",className:"w-full justify-start",children:[e.jsx("span",{className:"mr-2",children:"+"})," New Template"]}),e.jsxs(f,{variant:"outline",className:"w-full justify-start",children:[e.jsx("span",{className:"mr-2",children:"+"})," Import Contacts"]}),e.jsxs(f,{variant:"outline",className:"w-full justify-start",children:[e.jsx("span",{className:"mr-2",children:"↓"})," Export Reports"]})]})]})})]})]})};export{Cs as default};
