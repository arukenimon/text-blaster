var ie=Object.defineProperty;var le=(a,s,t)=>s in a?ie(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var A=(a,s,t)=>le(a,typeof s!="symbol"?s+"":s,t);import{r as oe,b as u,j as e,S as _,q as M,J as de}from"./app-CSIOPvwV.js";import{c as me,P as $,u as ue,a as I,b as U,T as he,d as pe,e as S,f as b}from"./tabs-BdAdUIvK.js";import{c as C,B as h,C as E,a as L}from"./createLucideIcon-C60s3Inl.js";import{u as K,M as xe,y as fe}from"./MessageComposer-Byi-ycTM.js";import{u as O,U as je,R as ve}from"./RecipientSelector-C_jtFDfS.js";import{C as ge,A as ye}from"./AnalyticsDashboard-BKR5Qeeo.js";import"./table-BzeateDv.js";import{c as Ne}from"./react-BtAKkRgn.js";import{I as B}from"./InputLabel-n6uH1vwW.js";import{I as q}from"./input-Dhax0en6.js";import be from"./Configuration-Dt6RuqVy.js";import"./index-BPvbTh0t.js";import"./InputError-CDFRN5KW.js";import"./DangerButton-Cxx9Q-DL.js";import"./transition-Bhi096iG.js";import"./PrimaryButton-CAkqx6kb.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Se=C("bell",we);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ke=C("chart-no-axes-column",Ce);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ee=C("message-square",Ae);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],H=C("settings",Le);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"m14.305 19.53.923-.382",key:"3m78fa"}],["path",{d:"m15.228 16.852-.923-.383",key:"npixar"}],["path",{d:"m16.852 15.228-.383-.923",key:"5xggr7"}],["path",{d:"m16.852 20.772-.383.924",key:"dpfhf9"}],["path",{d:"m19.148 15.228.383-.923",key:"1reyyz"}],["path",{d:"m19.53 21.696-.382-.924",key:"1goivc"}],["path",{d:"M2 21a8 8 0 0 1 10.434-7.62",key:"1yezr2"}],["path",{d:"m20.772 16.852.924-.383",key:"htqkph"}],["path",{d:"m20.772 19.148.924.383",key:"9w9pjp"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}]],Te=C("user-round-cog",Re);var R={exports:{}},T={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D;function _e(){if(D)return T;D=1;var a=oe();function s(l,o){return l===o&&(l!==0||1/l===1/o)||l!==l&&o!==o}var t=typeof Object.is=="function"?Object.is:s,n=a.useState,i=a.useEffect,r=a.useLayoutEffect,p=a.useDebugValue;function d(l,o){var j=o(),y=n({inst:{value:j,getSnapshot:o}}),f=y[0].inst,w=y[1];return r(function(){f.value=j,f.getSnapshot=o,c(f)&&w({inst:f})},[l,j,o]),i(function(){return c(f)&&w({inst:f}),l(function(){c(f)&&w({inst:f})})},[l]),p(j),j}function c(l){var o=l.getSnapshot;l=l.value;try{var j=o();return!t(l,j)}catch{return!0}}function m(l,o){return o()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return T.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:g,T}var W;function Me(){return W||(W=1,R.exports=_e()),R.exports}var Ie=Me();function $e(){return Ie.useSyncExternalStore(Ue,()=>!0,()=>!1)}function Ue(){return()=>{}}var F="Avatar",[Fe,is]=me(F),[Pe,G]=Fe(F),J=u.forwardRef((a,s)=>{const{__scopeAvatar:t,...n}=a,[i,r]=u.useState("idle");return e.jsx(Pe,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:r,children:e.jsx($.span,{...n,ref:s})})});J.displayName=F;var Q="AvatarImage",Y=u.forwardRef((a,s)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:i=()=>{},...r}=a,p=G(Q,t),d=ze(n,r),c=ue(m=>{i(m),p.onImageLoadingStatusChange(m)});return I(()=>{d!=="idle"&&c(d)},[d,c]),d==="loaded"?e.jsx($.img,{...r,ref:s,src:n}):null});Y.displayName=Q;var X="AvatarFallback",Z=u.forwardRef((a,s)=>{const{__scopeAvatar:t,delayMs:n,...i}=a,r=G(X,t),[p,d]=u.useState(n===void 0);return u.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>d(!0),n);return()=>window.clearTimeout(c)}},[n]),p&&r.imageLoadingStatus!=="loaded"?e.jsx($.span,{...i,ref:s}):null});Z.displayName=X;function V(a,s){return a?s?(a.src!==s&&(a.src=s),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ze(a,{referrerPolicy:s,crossOrigin:t}){const n=$e(),i=u.useRef(null),r=n?(i.current||(i.current=new window.Image),i.current):null,[p,d]=u.useState(()=>V(r,a));return I(()=>{d(V(r,a))},[r,a]),I(()=>{const c=l=>()=>{d(l)};if(!r)return;const m=c("loaded"),g=c("error");return r.addEventListener("load",m),r.addEventListener("error",g),s&&(r.referrerPolicy=s),typeof t=="string"&&(r.crossOrigin=t),()=>{r.removeEventListener("load",m),r.removeEventListener("error",g)}},[r,t,s]),p}var ee=J,se=Y,ae=Z;const te=u.forwardRef(({className:a,...s},t)=>e.jsx(ee,{ref:t,className:U("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s}));te.displayName=ee.displayName;const ne=u.forwardRef(({className:a,...s},t)=>e.jsx(se,{ref:t,className:U("aspect-square h-full w-full",a),...s}));ne.displayName=se.displayName;const re=u.forwardRef(({className:a,...s},t)=>e.jsx(ae,{ref:t,className:U("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s}));re.displayName=ae.displayName;const ce=Ne(a=>({activeTab:"",setActiveTab:s=>a({activeTab:s})})),Be=({tabActive:a="compose",templates:s,children:t})=>{const{recipients:n}=O(),{activeTab:i,setActiveTab:r}=ce(),{message:p,template_:d}=K(),{setData:c}=_({recipients:n,message:""});u.useEffect(()=>{c("message",p),c("recipients",n)},[n,p]);const{flash:m}=M().props;return u.useEffect(()=>{m&&window.alert_toast(m.title,m.message,m.icon)},[m]),e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx("header",{className:"border-b bg-card",children:e.jsxs("div",{className:"container flex h-16 items-center justify-between px-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"font-bold text-xl flex items-center",children:[e.jsx("span",{className:"text-primary",children:"Auto"}),e.jsx("span",{children:"Blitz"})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(h,{variant:"ghost",size:"icon",children:e.jsx(Se,{className:"h-5 w-5"})}),e.jsx(h,{variant:"ghost",size:"icon",children:e.jsx(H,{className:"h-5 w-5"})}),e.jsxs(te,{children:[e.jsx(ne,{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin",alt:"User"}),e.jsx(re,{children:"AB"})]}),e.jsx(de,{method:"POST",href:route("logout"),children:"Logout"})]})]})}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx("aside",{className:"hidden md:flex w-64 flex-col border-r bg-card p-4",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"py-2",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Menu"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(h,{variant:i==="compose"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>{r("compose")},children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Compose Message"]}),e.jsxs(h,{variant:i==="recipients"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>{r("recipients")},children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Select Recipients"]}),e.jsxs(h,{variant:i==="schedule"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>r("schedule"),children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Schedule"]}),e.jsxs(h,{variant:i==="analytics"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>r("analytics"),children:[e.jsx(ke,{className:"mr-2 h-4 w-4"}),"Analytics"]}),e.jsxs(h,{variant:i==="configuration"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>r("configuration"),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Configuration"]})]}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Settings"}),e.jsxs(h,{variant:i==="accsettings"?"secondary":"ghost",className:"w-full justify-start",onClick:()=>{r("accsettings")},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Account Settings"]})]})})}),e.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e.jsx("div",{className:"container mx-auto",children:t})})]})]})};var qe="https://sms.capcom.me/api/3rdparty/v1";class He{constructor(s,t,n,i=qe){A(this,"baseUrl");A(this,"httpClient");A(this,"defaultHeaders");this.baseUrl=i,this.httpClient=n,this.defaultHeaders={"User-Agent":"android-sms-gateway/1.0 (client; js)",Authorization:`Basic ${btoa(`${s}:${t}`)}`}}async send(s){const t=`${this.baseUrl}/message`,n={"Content-Type":"application/json",...this.defaultHeaders};return this.httpClient.post(t,s,n)}async getState(s){const t=`${this.baseUrl}/message/${s}`,n={...this.defaultHeaders};return this.httpClient.get(t,n)}async getWebhooks(){const s=`${this.baseUrl}/webhooks`,t={...this.defaultHeaders};return this.httpClient.get(s,t)}async registerWebhook(s){const t=`${this.baseUrl}/webhooks`,n={"Content-Type":"application/json",...this.defaultHeaders};return this.httpClient.post(t,s,n)}async deleteWebhook(s){const t=`${this.baseUrl}/webhooks/${s}`,n={...this.defaultHeaders};return this.httpClient.delete(t,n)}}var De=He;const ls=({tabActive:a="compose",templates:s,allrecipients:t,allsegments:n=[],config:i,cloudconfig:r})=>{const{activeTab:p,setActiveTab:d}=ce(),{recipients:c}=O(),{message:m,template_:g}=K(),{setData:l}=_({recipients:c,message:""});u.useEffect(()=>{l("message",m),l("recipients",c),c&&console.log("recipients:",c)},[c,m]);const{flash:o}=M().props;u.useEffect(()=>{o&&window.alert_toast(o.title,o.message,o.icon)},[o]);const[j,y]=u.useState(!1),f=async()=>{try{y(!0);const x=await axios.post("/services/send-sms",{message:m,phoneNumbers:c.map(v=>v.phone)});if(x.data.flash){const{icon:v,message:k,title:z}=x.data.flash;alert_toast(z,k,v)}console.log(x)}catch(x){console.error("Error:",x),fe.error("Failed to send message")}finally{y(!1)}},w={get:async(x,v)=>(await fetch(x,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("mjgwapo:ocWFMPKc")}})).json(),post:async(x,v,k)=>(await fetch(x,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("mjgwapo:ocWFMPKc")},body:JSON.stringify(v)})).json(),delete:async(x,v)=>(await fetch(x,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("mjgwapo:ocWFMPKc")}})).json()};new De("mjgwapo","ocWFMPKc",w);const{user:N}=M().props.auth,{data:P}=_({email:N==null?void 0:N.email,password:N==null?void 0:N.password});return e.jsxs(Be,{children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Text Blaster"}),e.jsx(E,{className:"mb-6",children:e.jsx(L,{className:"p-6",children:e.jsxs(he,{value:p,onValueChange:d,className:"w-full",children:[e.jsxs(pe,{className:"grid grid-cols-5 mb-6",children:[e.jsx(S,{value:"compose",children:"Compose"}),e.jsx(S,{value:"recipients",children:"Recipients"}),e.jsx(S,{value:"schedule",children:"Schedule"}),e.jsx(S,{value:"analytics",children:"Analytics"}),e.jsx(S,{value:"configuration",children:"Configuration"})]}),e.jsx(b,{value:"compose",className:"space-y-4",children:e.jsx(xe,{onNext:()=>d("recipients"),messagetemps:s})}),e.jsx(b,{value:"recipients",className:"space-y-4",children:e.jsx(ve,{onBack:()=>d("compose"),onNext:()=>d("schedule"),allrecipients:t,allsegments:n})}),e.jsx(b,{value:"schedule",className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Schedule Your Message"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"send-now",name:"schedule",defaultChecked:!0}),e.jsx("label",{htmlFor:"send-now",children:"Send Immediately"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"schedule-later",name:"schedule",disabled:!0}),e.jsxs("label",{htmlFor:"schedule-later",children:["Schedule for Later",e.jsx("small",{className:" text-black-50",children:" (On Development...)"})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date and Time"}),e.jsx("input",{type:"datetime-local",className:"w-full p-2 border rounded-md",disabled:!0})]})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-md",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Message Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Template:"})," ",g]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recipients:"})," ",c.length," contacts"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Estimated Cost:"})," ₱",c?(c.length*2.5).toFixed(2):0]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsx(h,{variant:"outline",onClick:()=>d("recipients"),children:"Back"}),e.jsx(h,{onClick:()=>{f()},disabled:j,children:"Send Message"})]})]})}),e.jsx(b,{value:"analytics",className:"space-y-4",children:e.jsx(ye,{})}),e.jsx(b,{value:"configuration",className:"space-y-4",children:e.jsx(be,{config:i,cloudconfig:r})}),e.jsx(b,{value:"accsettings",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{value:"Email"}),e.jsx(q,{value:P.email,className:" w-full"})]}),e.jsxs("div",{children:[e.jsx(B,{value:"Pw"}),e.jsx(q,{value:P.password,className:" w-full"})]})]})})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(E,{children:e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Recent Campaigns"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Summer Sale Promo"}),e.jsx("span",{className:"text-green-500 text-sm",children:"Sent"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Service Reminder"}),e.jsx("span",{className:"text-amber-500 text-sm",children:"Scheduled"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"New Inventory Alert"}),e.jsx("span",{className:"text-gray-500 text-sm",children:"Draft"})]})]})]})}),e.jsx(E,{children:e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Message Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Messages Sent (MTD)"}),e.jsx("span",{className:"font-medium",children:"1,245"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Avg. Response Rate"}),e.jsx("span",{className:"font-medium",children:"12.3%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Active Campaigns"}),e.jsx("span",{className:"font-medium",children:"3"})]})]})]})}),e.jsx(E,{children:e.jsxs(L,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(h,{variant:"outline",className:"w-full justify-start",children:[e.jsx("span",{className:"mr-2",children:"+"})," New Template"]}),e.jsxs(h,{variant:"outline",className:"w-full justify-start",children:[e.jsx("span",{className:"mr-2",children:"+"})," Import Contacts"]}),e.jsxs(h,{variant:"outline",className:"w-full justify-start",children:[e.jsx("span",{className:"mr-2",children:"↓"})," Export Reports"]})]})]})})]})]})};export{ls as default};
