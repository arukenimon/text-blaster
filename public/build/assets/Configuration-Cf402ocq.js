import{j as s,b as x,S as p,f as u}from"./app-Bf9bZ36i.js";import{I as n}from"./input-ChFIGbzF.js";import{T as P,d as k,e as h,f as j}from"./tabs-CUURTTC5.js";import{I as o}from"./InputLabel-BpxeUOqV.js";import{P as v}from"./PrimaryButton-jbaJCwhg.js";function c({errors:e}){return s.jsx(s.Fragment,{children:Object.keys(e).length>0&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("ul",{className:"text-sm text-red-600",children:Object.entries(e).map(([l,a])=>s.jsx("li",{children:a},l))})})]})})})}function D({config:e,cloudconfig:l}){const[a,b]=x.useState("local"),{data:t,setData:m,post:w,processing:C,errors:i,clearErrors:N}=p({localaddr:e.localaddress??"",port:e.port,user:a=="local"?(e==null?void 0:e.username)??"":a=="cloud"?(l==null?void 0:l.username)??"":"",pw:a=="local"?(e==null?void 0:e.password)??"":a=="cloud"?(l==null?void 0:l.password)??"":"",type:a,simslot:a=="local"?e==null?void 0:e.simslot:""});x.useEffect(()=>{m({...t,user:a=="local"?e.username??"":a=="cloud"?(l==null?void 0:l.username)??"":"",pw:a=="local"?e.password??"":a=="cloud"?(l==null?void 0:l.password)??"":"",type:a=="local"?"local":"cloud",simslot:a=="local"?e==null?void 0:e.simslot:""})},[a]);const d=r=>{r.preventDefault(),m(r.target.name,r.target.value)},S=r=>{r.preventDefault(),w(route("admin.settings.saveconfig"),{onFinish:()=>{u.reload({only:["flash"]})}})},y=r=>{b(r),N()},{post:T}=p({}),L=r=>{r.preventDefault(),T(route("admin.settings.webhook.setup"),{onFinish:()=>{u.reload({only:["flash"]})}})};return s.jsxs("form",{onSubmit:S,className:" xl:w-3/4",children:[s.jsxs(P,{value:a,onValueChange:y,className:" w-full",children:[s.jsxs(k,{children:[s.jsx(h,{value:"local",children:"Local Host"}),s.jsx(h,{value:"cloud",children:"Server"})]}),s.jsxs(j,{value:"local",children:[s.jsx(c,{errors:i}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx(o,{value:"Local Address"}),s.jsx(n,{value:t.localaddr,name:"localaddr",onChange:d})]}),s.jsxs("div",{children:[s.jsx(o,{value:"Port"}),s.jsx(n,{value:t.port,name:"port",onChange:d})]}),s.jsxs("div",{children:[s.jsx(o,{value:"Sim Slot"}),s.jsx(n,{type:"number",step:"1",value:t.simslot,name:"simslot",onChange:d})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx(o,{value:"Username"}),s.jsx(n,{value:t.user,name:"user",onChange:d})]}),s.jsxs("div",{children:[s.jsx(o,{value:"Password"}),s.jsx(n,{type:"password",value:t.pw,name:"pw",onChange:d})]})]})]}),s.jsxs(j,{value:"cloud",children:[s.jsx(c,{errors:i}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx(o,{value:"Username"}),s.jsx(n,{name:"user",onChange:d,value:t.user})]}),s.jsxs("div",{children:[s.jsx(o,{value:"Password"}),s.jsx(n,{name:"pw",onChange:d,value:t.pw,type:"password"})]})]})]})]}),s.jsx(v,{className:"mt-3",disabled:C,children:"Save"}),s.jsx(v,{onClick:L,children:"Setup Webhook"})]})}const F=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{D as C,c as P,F as a};
